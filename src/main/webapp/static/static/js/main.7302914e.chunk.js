(this.webpackJsonpdoordashfrontend=this.webpackJsonpdoordashfrontend||[]).push([[0],{143:function(t,e,n){},221:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),r=n(24),i=n.n(r),s=(n(143),n(32)),o=n(228),u=n(226),l=n(71),j=n(131),d=n(65),h=n(129),b=n(224),f=n(223),O=function(t){var e="/login?username=".concat(t.username,"&password=").concat(t.password);return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to log in")}))},m=n(136),p=n(10),g=l.a.Option,x=function(t){var e=t.itemId,n=Object(c.useState)(!1),a=Object(s.a)(n,2),r=a[0],i=a[1];return Object(p.jsx)(d.a,{title:"Add to shopping cart",children:Object(p.jsx)(h.a,{loading:r,type:"primary",icon:Object(p.jsx)(m.a,{}),onClick:function(){i(!0),function(t){return fetch("/order/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to add menu item to shopping cart")}))}(e).then((function(){return j.b.success("Successfully add item")})).catch((function(t){return j.b.error(t.message)})).finally((function(){i(!1)}))}})})},y=function(){var t=Object(c.useState)([]),e=Object(s.a)(t,2),n=e[0],a=e[1],r=Object(c.useState)(),i=Object(s.a)(r,2),o=i[0],u=i[1],d=Object(c.useState)([]),h=Object(s.a)(d,2),O=h[0],m=h[1],y=Object(c.useState)(!1),v=Object(s.a)(y,2),S=v[0],w=v[1],C=Object(c.useState)(!1),F=Object(s.a)(C,2),I=F[0],k=F[1];return Object(c.useEffect)((function(){k(!0),fetch("/restaurants").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get restaurants");return t.json()})).then((function(t){m(t)})).catch((function(t){j.b.error(t.message)})).finally((function(){k(!1)}))}),[]),Object(c.useEffect)((function(){var t;o&&(w(!0),(t=o,fetch("/restaurant/".concat(t,"/menu")).then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get menus");return t.json()}))).then((function(t){a(t)})).catch((function(t){j.b.error(t.message)})).finally((function(){w(!1)})))}),[o]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(l.a,{value:o,onSelect:function(t){return u(t)},placeholder:"Select a restaurant",loading:I,style:{width:300},onChange:function(){},children:O.map((function(t){return Object(p.jsx)(g,{value:t.id,children:t.name})}))}),o&&Object(p.jsx)(b.b,{style:{marginTop:20},loading:S,grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:3,xxl:3},dataSource:n,renderItem:function(t){return Object(p.jsx)(b.b.Item,{children:Object(p.jsxs)(f.a,{title:t.name,extra:Object(p.jsx)(x,{itemId:t.id}),children:[Object(p.jsx)("img",{src:t.imageUrl,alt:t.name,style:{height:340,width:"100%",display:"block"}}),"Price: ".concat(t.price)]})})}})]})},v=n(125),S=n(135),w=n(130),C=n(225),F=n(227),I=n(230),k=n(231),P=function(t){Object(S.a)(n,t);var e=Object(w.a)(n);function n(){var t;Object(v.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={loading:!1},t.onFinish=function(e){t.setState({loading:!0}),O(e).then((function(){j.b.success("Login Successful"),t.props.onSuccess()})).catch((function(t){j.b.error(t.message)})).finally((function(){t.setState({loading:!1})}))},t.render=function(){return Object(p.jsxs)(C.a,{name:"normal_login",onFinish:t.onFinish,style:{width:300,margin:"auto"},children:[Object(p.jsx)(C.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(p.jsx)(F.a,{prefix:Object(p.jsx)(I.a,{}),placeholder:"Username"})}),Object(p.jsx)(C.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(p.jsx)(F.a.Password,{prefix:Object(p.jsx)(k.a,{}),placeholder:"Password"})}),Object(p.jsx)(C.a.Item,{children:Object(p.jsx)(h.a,{type:"primary",htmlType:"submit",loading:t.state.loading,children:"Login"})})]})},t}return n}(a.a.Component),T=n(229),E=u.a.Text,L=function(){var t=Object(c.useState)(!1),e=Object(s.a)(t,2),n=e[0],a=e[1],r=Object(c.useState)(),i=Object(s.a)(r,2),o=i[0],u=i[1],l=Object(c.useState)(!1),d=Object(s.a)(l,2),f=d[0],O=d[1],m=Object(c.useState)(!1),g=Object(s.a)(m,2),x=g[0],y=g[1];Object(c.useEffect)((function(){n&&(O(!0),fetch("/cart").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to get shopping cart data");return t.json()})).then((function(t){u(t)})).catch((function(t){j.b.error(t.message)})).finally((function(){O(!1)})))}),[n]);var v=function(){a(!1)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(h.a,{type:"primary",shape:"round",onClick:function(){a(!0)},children:"Cart"}),Object(p.jsx)(T.a,{title:"My Shopping Cart",onClose:v,visible:n,width:520,footer:Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(p.jsx)(E,{strong:!0,children:"Total price: $".concat(null===o||void 0===o?void 0:o.totalPrice)}),Object(p.jsxs)("div",{children:[Object(p.jsx)(h.a,{onClick:v,style:{marginRight:8},children:"Cancel"}),Object(p.jsx)(h.a,{onClick:function(){y(!0),fetch("/checkout").then((function(t){if(t.status<200||t.status>=300)throw Error("Fail to checkout")})).then((function(){j.b.success("Successfully checkout"),a(!1)})).catch((function(t){j.b.error(t.message)})).finally((function(){y(!1)}))},type:"primary",loading:x,disabled:f||0===(null===o||void 0===o?void 0:o.orderItemList.length),children:"Checkout"})]})]}),children:Object(p.jsx)(b.b,{loading:f,itemLayout:"horizontal",dataSource:null===o||void 0===o?void 0:o.orderItemList,renderItem:function(t){return Object(p.jsx)(b.b.Item,{children:Object(p.jsx)(b.b.Item.Meta,{title:t.menuItem.name,description:"$".concat(t.price)})})}})})]})},B=o.a.Header,H=o.a.Content,M=u.a.Title;var U=function(){var t=Object(c.useState)(!1),e=Object(s.a)(t,2),n=e[0],a=e[1];return Object(p.jsxs)(o.a,{style:{height:"100vh"},children:[Object(p.jsx)(B,{children:Object(p.jsxs)("div",{className:"header",style:{display:"flex",justifyContent:"space-between"},children:[Object(p.jsx)(M,{level:2,style:{color:"white",lineHeight:"inherit",marginBottom:0},children:"Lai Food"}),n&&Object(p.jsx)("div",{children:Object(p.jsx)(L,{})})]})}),Object(p.jsx)(H,{style:{padding:"50px",maxHeight:"calc(100% - 64px)",overflowY:"auto"},children:n?Object(p.jsx)(y,{}):Object(p.jsx)(P,{onSuccess:function(){return a(!0)}})})]})},q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,232)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(U,{})}),document.getElementById("root")),q()}},[[221,1,2]]]);
//# sourceMappingURL=main.7302914e.chunk.js.map